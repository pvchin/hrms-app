{"ast":null,"code":"import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useReducer}from\"react\";import axios from\"axios\";import reducer from\"../reducers/dailyallowances_reducer\";import{dailyallowances_url}from\"../utils/constants\";import{SET_EDITDAILYALLOWANCEID,SET_ISDAILYALLOWANCEEDITING_ON,SET_ISDAILYALLOWANCEEDITING_OFF,SET_DAILYALLOWANCE_PERIOD,SET_SINGLEDAILYALLOWANCE,GET_DAILYALLOWANCES_BEGIN,GET_DAILYALLOWANCES_SUCCESS,GET_DAILYALLOWANCES_ERROR,GET_SINGLE_DAILYALLOWANCE_BEGIN,GET_SINGLE_DAILYALLOWANCE_SUCCESS,GET_SINGLE_DAILYALLOWANCE_ERROR,ADD_DAILYALLOWANCE_BEGIN,ADD_DAILYALLOWANCE_SUCCESS,ADD_DAILYALLOWANCE_ERROR,DELETE_DAILYALLOWANCE_BEGIN,DELETE_DAILYALLOWANCE_SUCCESS,DELETE_DAILYALLOWANCE_ERROR,UPDATE_DAILYALLOWANCE_BEGIN,UPDATE_DAILYALLOWANCE_SUCCESS,UPDATE_DAILYALLOWANCE_ERROR,RESET_SINGLE_DAILYALLOWANCE}from\"../actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={isDailyAllowanceEditing:false,alertDailyAllowance:{show:false,msg:\"\",type:\"\"},editDailyAllowanceID:null,dailyallowances_loading:false,dailyallowances_error:false,dailyallowances:[],single_dailyallowance_loading:false,single_dailyallowance_error:false,single_dailyallowance:{},delete_dailyallowance_loading:false,delete_dailyallowance_error:false,update_dailyallowance_loading:false,update_dailyallowance_error:false,add_dailyallowance_loading:false,add_dailyallowance_error:false,dailyallowance_period:\"\"// filterValue: \"Female\",\n// filterfield: \"gender\",\n};var DailyAllowancesContext=/*#__PURE__*/React.createContext();export var DailyAllowancesProvider=function DailyAllowancesProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var loadDailyAllowances=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,dailyallowances;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:GET_DAILYALLOWANCES_BEGIN});_context.prev=1;_context.next=4;return fetch(dailyallowances_url);case 4:res=_context.sent;_context.next=7;return res.json();case 7:dailyallowances=_context.sent;dispatch({type:GET_DAILYALLOWANCES_SUCCESS,payload:dailyallowances});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch({type:GET_DAILYALLOWANCES_ERROR});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function loadDailyAllowances(){return _ref2.apply(this,arguments);};}();var setIsDailyAllowanceEditingOn=function setIsDailyAllowanceEditingOn(){dispatch({type:SET_ISDAILYALLOWANCEEDITING_ON});};var setIsDailyAllowanceEditingOff=function setIsDailyAllowanceEditingOff(){dispatch({type:SET_ISDAILYALLOWANCEEDITING_OFF});};var resetSingleDailyAllowance=function resetSingleDailyAllowance(){dispatch({type:RESET_SINGLE_DAILYALLOWANCE});};var setDailyAllowancePeriod=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(name){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{dispatch({type:SET_DAILYALLOWANCE_PERIOD,payload:name});}catch(error){dispatch(error);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function setDailyAllowancePeriod(_x){return _ref3.apply(this,arguments);};}();var setEditDailyAllowanceID=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:try{dispatch({type:SET_EDITDAILYALLOWANCEID,payload:id});}catch(error){dispatch(error);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function setEditDailyAllowanceID(_x2){return _ref4.apply(this,arguments);};}();var getSingleDailyAllowance=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){var _yield$axios$get,data,singledailyallowance;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:GET_SINGLE_DAILYALLOWANCE_BEGIN});_context4.prev=1;_context4.next=4;return axios.get(\"\".concat(dailyallowances_url,\"?id=\").concat(id));case 4:_yield$axios$get=_context4.sent;data=_yield$axios$get.data;singledailyallowance=data;dispatch({type:GET_SINGLE_DAILYALLOWANCE_SUCCESS,payload:singledailyallowance});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](1);dispatch({type:GET_SINGLE_DAILYALLOWANCE_ERROR});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[1,10]]);}));return function getSingleDailyAllowance(_x3){return _ref5.apply(this,arguments);};}();var addDailyAllowance=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var id,name,period,location,manager_name,no_of_days,amount,status;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:id=data.id,name=data.name,period=data.period,location=data.location,manager_name=data.manager_name,no_of_days=data.no_of_days,amount=data.amount,status=data.status;//\ndispatch({type:ADD_DAILYALLOWANCE_BEGIN});_context5.prev=2;_context5.next=5;return fetch(dailyallowances_url,{method:\"POST\",body:JSON.stringify(_objectSpread({},data))});case 5:dispatch({type:ADD_DAILYALLOWANCE_SUCCESS});_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](2);dispatch({type:ADD_DAILYALLOWANCE_ERROR});case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[2,8]]);}));return function addDailyAllowance(_x4){return _ref6.apply(this,arguments);};}();var updateDailyAllowance=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var id,fields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:id=data.id,fields=_objectWithoutProperties(data,[\"id\"]);dispatch({type:UPDATE_DAILYALLOWANCE_BEGIN});_context6.prev=2;_context6.next=5;return fetch(dailyallowances_url,{method:\"PUT\",body:JSON.stringify(_objectSpread({id:id},fields))});case 5:dispatch({type:UPDATE_DAILYALLOWANCE_SUCCESS});_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](2);dispatch({type:UPDATE_DAILYALLOWANCE_ERROR});case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[2,8]]);}));return function updateDailyAllowance(_x5){return _ref7.apply(this,arguments);};}();var deleteDailyAllowance=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:DELETE_DAILYALLOWANCE_BEGIN});_context7.prev=1;_context7.next=4;return fetch(dailyallowances_url,{method:\"DELETE\",body:JSON.stringify({id:id})});case 4:dispatch({type:DELETE_DAILYALLOWANCE_SUCCESS});//loadEmployees();\n_context7.next=10;break;case 7:_context7.prev=7;_context7.t0=_context7[\"catch\"](1);dispatch({type:DELETE_DAILYALLOWANCE_ERROR});case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[1,7]]);}));return function deleteDailyAllowance(_x6){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsx(DailyAllowancesContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{loadDailyAllowances:loadDailyAllowances,addDailyAllowance:addDailyAllowance,updateDailyAllowance:updateDailyAllowance,deleteDailyAllowance:deleteDailyAllowance,getSingleDailyAllowance:getSingleDailyAllowance,setEditDailyAllowanceID:setEditDailyAllowanceID,setIsDailyAllowanceEditingOn:setIsDailyAllowanceEditingOn,setIsDailyAllowanceEditingOff:setIsDailyAllowanceEditingOff,setDailyAllowancePeriod:setDailyAllowancePeriod,resetSingleDailyAllowance:resetSingleDailyAllowance}),children:children});};export var useDailyAllowancesContext=function useDailyAllowancesContext(){return useContext(DailyAllowancesContext);};","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/context/dailyallowances_context.js"],"names":["React","useContext","useEffect","useReducer","axios","reducer","dailyallowances_url","SET_EDITDAILYALLOWANCEID","SET_ISDAILYALLOWANCEEDITING_ON","SET_ISDAILYALLOWANCEEDITING_OFF","SET_DAILYALLOWANCE_PERIOD","SET_SINGLEDAILYALLOWANCE","GET_DAILYALLOWANCES_BEGIN","GET_DAILYALLOWANCES_SUCCESS","GET_DAILYALLOWANCES_ERROR","GET_SINGLE_DAILYALLOWANCE_BEGIN","GET_SINGLE_DAILYALLOWANCE_SUCCESS","GET_SINGLE_DAILYALLOWANCE_ERROR","ADD_DAILYALLOWANCE_BEGIN","ADD_DAILYALLOWANCE_SUCCESS","ADD_DAILYALLOWANCE_ERROR","DELETE_DAILYALLOWANCE_BEGIN","DELETE_DAILYALLOWANCE_SUCCESS","DELETE_DAILYALLOWANCE_ERROR","UPDATE_DAILYALLOWANCE_BEGIN","UPDATE_DAILYALLOWANCE_SUCCESS","UPDATE_DAILYALLOWANCE_ERROR","RESET_SINGLE_DAILYALLOWANCE","initialState","isDailyAllowanceEditing","alertDailyAllowance","show","msg","type","editDailyAllowanceID","dailyallowances_loading","dailyallowances_error","dailyallowances","single_dailyallowance_loading","single_dailyallowance_error","single_dailyallowance","delete_dailyallowance_loading","delete_dailyallowance_error","update_dailyallowance_loading","update_dailyallowance_error","add_dailyallowance_loading","add_dailyallowance_error","dailyallowance_period","DailyAllowancesContext","createContext","DailyAllowancesProvider","children","state","dispatch","loadDailyAllowances","fetch","res","json","payload","setIsDailyAllowanceEditingOn","setIsDailyAllowanceEditingOff","resetSingleDailyAllowance","setDailyAllowancePeriod","name","error","setEditDailyAllowanceID","id","getSingleDailyAllowance","get","data","singledailyallowance","addDailyAllowance","period","location","manager_name","no_of_days","amount","status","method","body","JSON","stringify","updateDailyAllowance","fields","deleteDailyAllowance","useDailyAllowancesContext"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport reducer from \"../reducers/dailyallowances_reducer\";\r\nimport { dailyallowances_url } from \"../utils/constants\";\r\n\r\nimport {\r\n  SET_EDITDAILYALLOWANCEID,\r\n  SET_ISDAILYALLOWANCEEDITING_ON,\r\n  SET_ISDAILYALLOWANCEEDITING_OFF,\r\n  SET_DAILYALLOWANCE_PERIOD,\r\n  SET_SINGLEDAILYALLOWANCE,\r\n  GET_DAILYALLOWANCES_BEGIN,\r\n  GET_DAILYALLOWANCES_SUCCESS,\r\n  GET_DAILYALLOWANCES_ERROR,\r\n  GET_SINGLE_DAILYALLOWANCE_BEGIN,\r\n  GET_SINGLE_DAILYALLOWANCE_SUCCESS,\r\n  GET_SINGLE_DAILYALLOWANCE_ERROR,\r\n  ADD_DAILYALLOWANCE_BEGIN,\r\n  ADD_DAILYALLOWANCE_SUCCESS,\r\n  ADD_DAILYALLOWANCE_ERROR,\r\n  DELETE_DAILYALLOWANCE_BEGIN,\r\n  DELETE_DAILYALLOWANCE_SUCCESS,\r\n  DELETE_DAILYALLOWANCE_ERROR,\r\n  UPDATE_DAILYALLOWANCE_BEGIN,\r\n  UPDATE_DAILYALLOWANCE_SUCCESS,\r\n  UPDATE_DAILYALLOWANCE_ERROR,\r\n  RESET_SINGLE_DAILYALLOWANCE,\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n  isDailyAllowanceEditing: false,\r\n  alertDailyAllowance: { show: false, msg: \"\", type: \"\" },\r\n  editDailyAllowanceID: null,\r\n  dailyallowances_loading: false,\r\n  dailyallowances_error: false,\r\n  dailyallowances: [],\r\n  single_dailyallowance_loading: false,\r\n  single_dailyallowance_error: false,\r\n  single_dailyallowance: {},\r\n  delete_dailyallowance_loading: false,\r\n  delete_dailyallowance_error: false,\r\n  update_dailyallowance_loading: false,\r\n  update_dailyallowance_error: false,\r\n  add_dailyallowance_loading: false,\r\n  add_dailyallowance_error: false,\r\n  dailyallowance_period: \"\",\r\n  // filterValue: \"Female\",\r\n  // filterfield: \"gender\",\r\n};\r\n\r\nconst DailyAllowancesContext = React.createContext();\r\n\r\nexport const DailyAllowancesProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const loadDailyAllowances = async () => {\r\n    dispatch({ type: GET_DAILYALLOWANCES_BEGIN });\r\n    try {\r\n      // const res = await fetch(\r\n      //   `${employees_url}?filterValue=\"${state.filterValue}\"&filterField=\"${state.filterField}\"`\r\n      // );\r\n      const res = await fetch(dailyallowances_url);\r\n      //const { data } = await axios.get(employees_url);\r\n      //const employees = data;\r\n      const dailyallowances = await res.json();\r\n      dispatch({ type: GET_DAILYALLOWANCES_SUCCESS, payload: dailyallowances });\r\n    } catch (error) {\r\n      dispatch({ type: GET_DAILYALLOWANCES_ERROR });\r\n    }\r\n  };\r\n\r\n  const setIsDailyAllowanceEditingOn = () => {\r\n    dispatch({ type: SET_ISDAILYALLOWANCEEDITING_ON });\r\n  };\r\n\r\n  const setIsDailyAllowanceEditingOff = () => {\r\n    dispatch({ type: SET_ISDAILYALLOWANCEEDITING_OFF });\r\n  };\r\n\r\n  const resetSingleDailyAllowance = () => {\r\n    dispatch({ type: RESET_SINGLE_DAILYALLOWANCE });\r\n  };\r\n\r\n  const setDailyAllowancePeriod = async (name) => {\r\n    try {\r\n      dispatch({ type: SET_DAILYALLOWANCE_PERIOD, payload: name });\r\n    } catch (error) {\r\n      dispatch(error);\r\n    }\r\n  };\r\n\r\n  const setEditDailyAllowanceID = async (id) => {\r\n    try {\r\n      dispatch({ type: SET_EDITDAILYALLOWANCEID, payload: id });\r\n    } catch (error) {\r\n      dispatch(error);\r\n    }\r\n  };\r\n\r\n  const getSingleDailyAllowance = async (id) => {\r\n    dispatch({ type: GET_SINGLE_DAILYALLOWANCE_BEGIN });\r\n    try {\r\n      const { data } = await axios.get(`${dailyallowances_url}?id=${id}`);\r\n      const singledailyallowance = data;\r\n      dispatch({\r\n        type: GET_SINGLE_DAILYALLOWANCE_SUCCESS,\r\n        payload: singledailyallowance,\r\n      });\r\n    } catch (error) {\r\n      dispatch({ type: GET_SINGLE_DAILYALLOWANCE_ERROR });\r\n    }\r\n  };\r\n\r\n  const addDailyAllowance = async (data) => {\r\n    const {\r\n      id,\r\n      name,\r\n      period,\r\n      location,\r\n      manager_name,\r\n      no_of_days,\r\n      amount,\r\n      status,\r\n    } = data;\r\n    //\r\n    dispatch({ type: ADD_DAILYALLOWANCE_BEGIN });\r\n    try {\r\n      await fetch(dailyallowances_url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ ...data }),\r\n      });\r\n      dispatch({ type: ADD_DAILYALLOWANCE_SUCCESS });\r\n    } catch (err) {\r\n      dispatch({ type: ADD_DAILYALLOWANCE_ERROR });\r\n    }\r\n  };\r\n\r\n  const updateDailyAllowance = async (data) => {\r\n    const { id, ...fields } = data;\r\n\r\n    dispatch({ type: UPDATE_DAILYALLOWANCE_BEGIN });\r\n    try {\r\n      await fetch(dailyallowances_url, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ id, ...fields }),\r\n      });\r\n      dispatch({ type: UPDATE_DAILYALLOWANCE_SUCCESS });\r\n    } catch (error) {\r\n      dispatch({ type: UPDATE_DAILYALLOWANCE_ERROR });\r\n    }\r\n  };\r\n\r\n  const deleteDailyAllowance = async (id) => {\r\n    dispatch({ type: DELETE_DAILYALLOWANCE_BEGIN });\r\n    try {\r\n      await fetch(dailyallowances_url, {\r\n        method: \"DELETE\",\r\n        body: JSON.stringify({ id: id }),\r\n      });\r\n      dispatch({ type: DELETE_DAILYALLOWANCE_SUCCESS });\r\n      //loadEmployees();\r\n    } catch (err) {\r\n      dispatch({ type: DELETE_DAILYALLOWANCE_ERROR });\r\n    }\r\n  };\r\n  return (\r\n    <DailyAllowancesContext.Provider\r\n      value={{\r\n        ...state,\r\n        loadDailyAllowances,\r\n        addDailyAllowance,\r\n        updateDailyAllowance,\r\n        deleteDailyAllowance,\r\n        getSingleDailyAllowance,\r\n        setEditDailyAllowanceID,\r\n        setIsDailyAllowanceEditingOn,\r\n        setIsDailyAllowanceEditingOff,\r\n        setDailyAllowancePeriod,\r\n        resetSingleDailyAllowance,\r\n      }}\r\n    >\r\n      {children}\r\n    </DailyAllowancesContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useDailyAllowancesContext = () => {\r\n  return useContext(DailyAllowancesContext);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}