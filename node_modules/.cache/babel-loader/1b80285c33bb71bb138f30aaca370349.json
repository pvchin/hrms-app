{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from\"react\";import MaterialTable,{MTableToolbar}from\"material-table\";import{makeStyles}from\"@material-ui/core/styles\";import{Button}from\"@material-ui/core\";import AddIcon from\"@material-ui/icons/Add\";import EditIcon from\"@material-ui/icons/Edit\";import DeleteIcon from\"@material-ui/icons/Delete\";import CheckIcon from\"@material-ui/icons/Check\";import SearchIcon from\"@material-ui/icons/Search\";import ArrowBackIcon from\"@material-ui/icons/ArrowBack\";import BuildOutlinedIcon from\"@material-ui/icons/BuildOutlined\";import{useHistory,Link}from\"react-router-dom\";import{usePayslipsContext}from\"../context/payslips_context\";import{useEmployeesContext}from\"../context/employees_context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var columns=[{title:\"Name\",field:\"name\"},{title:\"Period\",field:\"period\"},{title:\"Date\",field:\"date\",type:\"date\"},{title:\"Nett Pay\",field:\"nett_pay\",type:\"numeric\"},{title:\"Bank Name\",field:\"bank_name\"},{title:\"Bank AC No\",field:\"bank_accno\"},{title:\"Status\",field:\"status\"}];export default function AllEmployeesTable(){var history=useHistory();var classes=useStyles();var _usePayslipsContext=usePayslipsContext(),payslips=_usePayslipsContext.payslips,addPayslip=_usePayslipsContext.addPayslip,payslips_loading=_usePayslipsContext.payslips_loading,updatePayslip=_usePayslipsContext.updatePayslip,deletePayslip=_usePayslipsContext.deletePayslip,loadPayslips=_usePayslipsContext.loadPayslips,getSinglePayslip=_usePayslipsContext.getSinglePayslip,getSingleBatchPayslip=_usePayslipsContext.getSingleBatchPayslip,setEditPayslipID=_usePayslipsContext.setEditPayslipID,setIsPayslipEditingOn=_usePayslipsContext.setIsPayslipEditingOn,setIsPayslipEditingOff=_usePayslipsContext.setIsPayslipEditingOff,resetSinglePayslip=_usePayslipsContext.resetSinglePayslip,payslip_period=_usePayslipsContext.payslip_period,payslip_endmonthdate=_usePayslipsContext.payslip_endmonthdate,singlebatchpayslip=_usePayslipsContext.singlebatchpayslip,singlebatch_payslip_loading=_usePayslipsContext.singlebatch_payslip_loading,singlebatch_payslip_error=_usePayslipsContext.singlebatch_payslip_error;var _useEmployeesContext=useEmployeesContext(),loadEmployees=_useEmployeesContext.loadEmployees,employees=_useEmployeesContext.employees;useEffect(function(){getSingleBatchPayslip(payslip_period);},[]);var update_Payslip=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=data.id;setEditPayslipID(id);setIsPayslipEditingOn();getSinglePayslip(id);history.push(\"/singlepayslip\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function update_Payslip(_x){return _ref.apply(this,arguments);};}();var add_Payslip=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=data.id;resetSinglePayslip();setEditPayslipID(\"\");setIsPayslipEditingOff();history.push(\"/singlepayslip\");case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function add_Payslip(_x2){return _ref2.apply(this,arguments);};}();var delete_Payslip=function delete_Payslip(data){var id=data.id;setEditPayslipID(id);deletePayslip(id);loadPayslips();};var build_Payslip=function build_Payslip(){var current_period=payslip_period;var current_endmonthdate=Date.parse(payslip_endmonthdate);loadEmployees();console.log(current_period);getSingleBatchPayslip(payslip_period);var paydata=singlebatchpayslip.map(function(e){return e.name;});console.log(\"paydata\",singlebatchpayslip.length,paydata);{employees.map(function(emp){var id=emp.id,name=emp.name,bank_name=emp.bank_name,bank_acno=emp.bank_acno,basic_salary=emp.basic_salary,tap_acno=emp.tap_acno,scp_acno=emp.scp_acno;var data={name:name,period:current_period,date:current_endmonthdate,basic_pay:basic_salary,nett_pay:0,bank_name:bank_name,bank_acno:bank_acno,tap_acno:tap_acno,scp_acno:scp_acno,empid:id,status:\"Pending\"};var res=paydata.includes(emp.name);if(!res){console.log(\"add\",data);addPayslip(_objectSpread({},data));}});}//loadDailyAllowances();\n};if(singlebatch_payslip_loading){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading.....Payslips\"})});}return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"100%\",paddingTop:\"5px\"},children:/*#__PURE__*/_jsx(MaterialTable,{columns:columns,data:singlebatchpayslip,title:\"Payslips\",icons:{Add:function Add(props){return/*#__PURE__*/_jsx(AddIcon,{});},Edit:function Edit(props){return/*#__PURE__*/_jsx(EditIcon,{});},Delete:function Delete(props){return/*#__PURE__*/_jsx(DeleteIcon,{});},Clear:function Clear(props){return/*#__PURE__*/_jsx(DeleteIcon,{});},Check:function Check(props){return/*#__PURE__*/_jsx(CheckIcon,{});},Search:function Search(props){return/*#__PURE__*/_jsx(SearchIcon,{});},ResetSearch:function ResetSearch(props){return/*#__PURE__*/_jsx(DeleteIcon,{});},Build:function Build(props){return/*#__PURE__*/_jsx(BuildOutlinedIcon,{});}},actions:[{icon:\"edit\",tooltip:\"Edit Record\",onClick:function onClick(event,rowData){update_Payslip(rowData);}},{icon:\"delete\",tooltip:\"Delete Record\",onClick:function onClick(event,rowData){delete_Payslip(rowData);}},{icon:\"add\",tooltip:\"Add Record\",isFreeAction:true,onClick:function onClick(event,rowData){add_Payslip(rowData);}},{icon:\"build\",tooltip:\"Build Records\",isFreeAction:true,onClick:function onClick(event,rowData){build_Payslip();}}],options:{filtering:true,headerStyle:{backgroundColor:\"#01579b\",color:\"#FFF\"},showTitle:true},components:{Toolbar:function Toolbar(props){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MTableToolbar,_objectSpread({},props)),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:22},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Batch: \".concat(payslip_period,\"      End Month: \").concat(payslip_endmonthdate)})}),/*#__PURE__*/_jsx(Link,{to:\"/payslip\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ArrowBackIcon,{fontSize:\"large\",color:\"primary\"})})})]});}}})})});}var useStyles=makeStyles(function(theme){return{root:{padding:0}};});","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/PayslipTable.js"],"names":["React","useState","useEffect","MaterialTable","MTableToolbar","makeStyles","Button","AddIcon","EditIcon","DeleteIcon","CheckIcon","SearchIcon","ArrowBackIcon","BuildOutlinedIcon","useHistory","Link","usePayslipsContext","useEmployeesContext","columns","title","field","type","AllEmployeesTable","history","classes","useStyles","payslips","addPayslip","payslips_loading","updatePayslip","deletePayslip","loadPayslips","getSinglePayslip","getSingleBatchPayslip","setEditPayslipID","setIsPayslipEditingOn","setIsPayslipEditingOff","resetSinglePayslip","payslip_period","payslip_endmonthdate","singlebatchpayslip","singlebatch_payslip_loading","singlebatch_payslip_error","loadEmployees","employees","update_Payslip","data","id","push","add_Payslip","delete_Payslip","build_Payslip","current_period","current_endmonthdate","Date","parse","console","log","paydata","map","e","name","length","emp","bank_name","bank_acno","basic_salary","tap_acno","scp_acno","period","date","basic_pay","nett_pay","empid","status","res","includes","root","maxWidth","paddingTop","Add","props","Edit","Delete","Clear","Check","Search","ResetSearch","Build","icon","tooltip","onClick","event","rowData","isFreeAction","filtering","headerStyle","backgroundColor","color","showTitle","Toolbar","paddingLeft","theme","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport BuildOutlinedIcon from \"@material-ui/icons/BuildOutlined\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\n\r\nimport { usePayslipsContext } from \"../context/payslips_context\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Name\",\r\n    field: \"name\",\r\n  },\r\n  { title: \"Period\", field: \"period\" },\r\n  { title: \"Date\", field: \"date\", type: \"date\" },\r\n  { title: \"Nett Pay\", field: \"nett_pay\", type: \"numeric\" },\r\n  { title: \"Bank Name\", field: \"bank_name\" },\r\n  { title: \"Bank AC No\", field: \"bank_accno\" },\r\n  { title: \"Status\", field: \"status\" },\r\n];\r\n\r\nexport default function AllEmployeesTable() {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const {\r\n    payslips,\r\n    addPayslip,\r\n    payslips_loading,\r\n    updatePayslip,\r\n    deletePayslip,\r\n    loadPayslips,\r\n    getSinglePayslip,\r\n    getSingleBatchPayslip,\r\n    setEditPayslipID,\r\n    setIsPayslipEditingOn,\r\n    setIsPayslipEditingOff,\r\n    resetSinglePayslip,\r\n    payslip_period,\r\n    payslip_endmonthdate,\r\n    singlebatchpayslip,\r\n    singlebatch_payslip_loading,\r\n    singlebatch_payslip_error,\r\n  } = usePayslipsContext();\r\n  const { loadEmployees, employees } = useEmployeesContext();\r\n\r\n  useEffect(() => {\r\n    getSingleBatchPayslip(payslip_period);\r\n  }, []);\r\n\r\n  const update_Payslip = async (data) => {\r\n    const { id } = data;\r\n    setEditPayslipID(id);\r\n    setIsPayslipEditingOn();\r\n    getSinglePayslip(id);\r\n    history.push(\"/singlepayslip\");\r\n  };\r\n\r\n  const add_Payslip = async (data) => {\r\n    const { id } = data;\r\n    resetSinglePayslip();\r\n    setEditPayslipID(\"\");\r\n    setIsPayslipEditingOff();\r\n    history.push(\"/singlepayslip\");\r\n  };\r\n\r\n  const delete_Payslip = (data) => {\r\n    const { id } = data;\r\n    setEditPayslipID(id);\r\n    deletePayslip(id);\r\n    loadPayslips();\r\n  };\r\n\r\n  const build_Payslip = () => {\r\n    const current_period = payslip_period;\r\n    const current_endmonthdate = Date.parse(payslip_endmonthdate);\r\n\r\n    loadEmployees();\r\n    console.log(current_period);\r\n    getSingleBatchPayslip(payslip_period);\r\n    const paydata = singlebatchpayslip.map((e) => e.name);\r\n    console.log(\"paydata\", singlebatchpayslip.length, paydata);\r\n    {\r\n      employees.map((emp) => {\r\n        const {\r\n          id,\r\n          name,\r\n          bank_name,\r\n          bank_acno,\r\n          basic_salary,\r\n          tap_acno,\r\n          scp_acno,\r\n        } = emp;\r\n        const data = {\r\n          name: name,\r\n          period: current_period,\r\n          date: current_endmonthdate,\r\n          basic_pay: basic_salary,\r\n          nett_pay: 0,\r\n          bank_name: bank_name,\r\n          bank_acno: bank_acno,\r\n          tap_acno: tap_acno,\r\n          scp_acno: scp_acno,\r\n          empid: id,\r\n          status: \"Pending\",\r\n        };\r\n        const res = paydata.includes(emp.name);\r\n        if (!res) {\r\n          console.log(\"add\", data);\r\n          addPayslip({ ...data });\r\n        }\r\n      });\r\n    }\r\n    //loadDailyAllowances();\r\n  };\r\n\r\n  if (singlebatch_payslip_loading) {\r\n    return (\r\n      <div>\r\n        <h2>Loading.....Payslips</h2>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className={classes.root}>\r\n      <div style={{ maxWidth: \"100%\", paddingTop: \"5px\" }}>\r\n        <MaterialTable\r\n          columns={columns}\r\n          data={singlebatchpayslip}\r\n          title=\"Payslips\"\r\n          icons={{\r\n            Add: (props) => <AddIcon />,\r\n            Edit: (props) => <EditIcon />,\r\n            Delete: (props) => <DeleteIcon />,\r\n            Clear: (props) => <DeleteIcon />,\r\n            Check: (props) => <CheckIcon />,\r\n            Search: (props) => <SearchIcon />,\r\n            ResetSearch: (props) => <DeleteIcon />,\r\n            Build: (props) => <BuildOutlinedIcon />,\r\n          }}\r\n          actions={[\r\n            {\r\n              icon: \"edit\",\r\n              tooltip: \"Edit Record\",\r\n              onClick: (event, rowData) => {\r\n                update_Payslip(rowData);\r\n              },\r\n            },\r\n            {\r\n              icon: \"delete\",\r\n              tooltip: \"Delete Record\",\r\n              onClick: (event, rowData) => {\r\n                delete_Payslip(rowData);\r\n              },\r\n            },\r\n            {\r\n              icon: \"add\",\r\n              tooltip: \"Add Record\",\r\n              isFreeAction: true,\r\n              onClick: (event, rowData) => {\r\n                add_Payslip(rowData);\r\n              },\r\n            },\r\n            {\r\n              icon: \"build\",\r\n              tooltip: \"Build Records\",\r\n              isFreeAction: true,\r\n              onClick: (event, rowData) => {\r\n                build_Payslip();\r\n              },\r\n            },\r\n          ]}\r\n          options={{\r\n            filtering: true,\r\n            headerStyle: {\r\n              backgroundColor: \"#01579b\",\r\n              color: \"#FFF\",\r\n            },\r\n            showTitle: true,\r\n          }}\r\n          components={{\r\n            Toolbar: (props) => (\r\n              <div>\r\n                <MTableToolbar {...props} />\r\n                <div style={{ paddingLeft: 22 }}>\r\n                  <h3>{`Batch: ${payslip_period}      End Month: ${payslip_endmonthdate}`}</h3>\r\n                </div>\r\n                {/* <div style={{ paddingLeft: 22 }}>\r\n                  <h3>{`End Month: ${payslip_endmonthdate}`}</h3>\r\n                </div> */}\r\n                <Link to=\"/payslip\">\r\n                  <div>\r\n                    <ArrowBackIcon fontSize=\"large\" color=\"primary\" />\r\n                  </div>\r\n                </Link>\r\n              </div>\r\n            ),\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}