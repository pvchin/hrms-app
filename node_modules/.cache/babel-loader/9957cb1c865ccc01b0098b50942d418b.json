{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useReducer,useEffect}from\"react\";import{Button,Icon,TextField,Paper,Typography,Select}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import MenuItem from\"@material-ui/core/MenuItem\";import{useEmployeesContext}from\"../context/employees_context\";import{useExpensesContext}from\"../context/expenses_context\";import{Controller,useForm}from\"react-hook-form\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initial_values={name:\"\",date:\"\",purchased_date:\"\",purchased_from:\"\",description:\"\",remark:\"\",status:\"Pending\",amount:0};var ExpenseForm=function ExpenseForm(){var history=useHistory();var classes=useStyles();var _useExpensesContext=useExpensesContext(),isExpenseEditing=_useExpensesContext.isExpenseEditing,single_expense=_useExpensesContext.single_expense,updateExpense=_useExpensesContext.updateExpense,addExpense=_useExpensesContext.addExpense,editExpenseID=_useExpensesContext.editExpenseID,loadExpenses=_useExpensesContext.loadExpenses,single_expense_loading=_useExpensesContext.single_expense_loading;var _useEmployeesContext=useEmployeesContext(),loadEmployees=_useEmployeesContext.loadEmployees,employees=_useEmployeesContext.employees;var _ref=single_expense||initial_values,name=_ref.name,date=_ref.date,purchased_date=_ref.purchased_date,purchased_from=_ref.purchased_from,description=_ref.description,remark=_ref.remark,status=_ref.status,amount=_ref.amount;var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,control=_useForm.control;useEffect(function(){loadEmployees();},[]);var onSubmit=function onSubmit(data){if(isExpenseEditing){updateExpense(_objectSpread({id:editExpenseID},data));}else{addExpense(_objectSpread({},data));}loadExpenses();history.push(\"/expenses\");};if(single_expense_loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Paper,{className:classes.root,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h3\",children:\"EXPENSES CLAIM FORM\"}),/*#__PURE__*/_jsx(Typography,{component:\"p\",children:\"Expense Claim Application\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"name\",control:control,defaultValue:name,render:function render(_ref2){var _ref2$field=_ref2.field,onChange=_ref2$field.onChange,value=_ref2$field.value,error=_ref2.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Name\",id:\"margin-normal\",name:\"name\",defaultValue:name,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,select:true,children:employees.map(function(e){return/*#__PURE__*/_jsx(MenuItem,{value:e.name,children:e.name},e.name);})});},rules:{required:\"Name required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"date\",control:control,defaultValue:date,render:function render(_ref3){var _ref3$field=_ref3.field,onChange=_ref3$field.onChange,value=_ref3$field.value,error=_ref3.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Date\",type:\"date\",id:\"margin-normal\",name:\"date\",defaultValue:date,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,InputLabelProps:{shrink:true}});},rules:{required:\"From Date is required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"purchased_date\",control:control,defaultValue:purchased_date,render:function render(_ref4){var _ref4$field=_ref4.field,onChange=_ref4$field.onChange,value=_ref4$field.value,error=_ref4.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Purchased Date\",id:\"margin-normal\",type:\"date\",name:\"purchased_date\",defaultValue:purchased_date,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,InputLabelProps:{shrink:true}});},rules:{required:\"Purchased Date is required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"purchased_from\",control:control,defaultValue:purchased_from,render:function render(_ref5){var _ref5$field=_ref5.field,onChange=_ref5$field.onChange,value=_ref5$field.value,error=_ref5.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Purchased From\",id:\"margin-normal\",name:\"purchased_from\",defaultValue:purchased_from,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null});}// rules={{ required: \"Reason is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"description\",control:control,defaultValue:description,render:function render(_ref6){var _ref6$field=_ref6.field,onChange=_ref6$field.onChange,value=_ref6$field.value,error=_ref6.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Description\",id:\"margin-normal\",name:\"description\",defaultValue:description,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null});}// rules={{ required: \"Reason is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"amount\",control:control,defaultValue:amount,render:function render(_ref7){var _ref7$field=_ref7.field,_onChange=_ref7$field.onChange,value=_ref7$field.value,error=_ref7.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Amount\",type:\"number\",id:\"standard-number\",name:\"amount\",defaultValue:amount,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){_onChange(parseInt(e.target.value,10));},error:!!error,helperText:error?error.message:null});}//rules={{ required: \"IC No required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"remark\",control:control,defaultValue:remark,render:function render(_ref8){var _ref8$field=_ref8.field,onChange=_ref8$field.onChange,value=_ref8$field.value,error=_ref8.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Remark\",id:\"margin-normal\",name:\"remark\",defaultValue:remark,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null});}// rules={{ required: \"Reason is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"status\",control:control,defaultValue:\"Pending\",render:function render(_ref9){var _ref9$field=_ref9.field,onChange=_ref9$field.onChange,value=_ref9$field.value,error=_ref9.fieldState.error;return/*#__PURE__*/_jsxs(TextField,{label:\"Status\",id:\"margin-normal\",name:\"status\",defaultValue:status,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,select:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Cancel\",children:\"Cancel\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Rejected\",children:\"Rejected\"})]});}//rules={{ required: \"Status is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,children:[\"Submit \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]})})]})]})});};var useStyles=makeStyles(function(theme){return{button:{margin:theme.spacing(1)},leftIcon:{marginRight:theme.spacing(1)},rightIcon:{marginLeft:theme.spacing(1)},iconSmall:{fontSize:20},root:{padding:theme.spacing(3,2)},container:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:400}};});export default ExpenseForm;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/ExpenseForm.js"],"names":["React","useState","useReducer","useEffect","Button","Icon","TextField","Paper","Typography","Select","makeStyles","MenuItem","useEmployeesContext","useExpensesContext","Controller","useForm","useHistory","initial_values","name","date","purchased_date","purchased_from","description","remark","status","amount","ExpenseForm","history","classes","useStyles","isExpenseEditing","single_expense","updateExpense","addExpense","editExpenseID","loadExpenses","single_expense_loading","loadEmployees","employees","handleSubmit","control","onSubmit","data","id","push","root","field","onChange","value","error","fieldState","textField","message","map","e","required","shrink","parseInt","target","button","rightIcon","theme","margin","spacing","leftIcon","marginRight","marginLeft","iconSmall","fontSize","padding","container","display","flexWrap","width"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  Icon,\r\n  TextField,\r\n  Paper,\r\n  Typography,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { useExpensesContext } from \"../context/expenses_context\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst initial_values = {\r\n  name: \"\",\r\n  date: \"\",\r\n  purchased_date: \"\",\r\n  purchased_from: \"\",\r\n  description: \"\",\r\n  remark: \"\",\r\n  status: \"Pending\",\r\n  amount: 0,\r\n};\r\n\r\nconst ExpenseForm = () => {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const {\r\n    isExpenseEditing,\r\n    single_expense,\r\n    updateExpense,\r\n    addExpense,\r\n    editExpenseID,\r\n    loadExpenses,\r\n    single_expense_loading,\r\n  } = useExpensesContext();\r\n  const { loadEmployees, employees } = useEmployeesContext();\r\n  const {\r\n    name,\r\n    date,\r\n    purchased_date,\r\n    purchased_from,\r\n    description,\r\n    remark,\r\n    status,\r\n    amount,\r\n  } = single_expense || initial_values;\r\n  const { handleSubmit, control } = useForm();\r\n\r\n  useEffect(() => {\r\n    loadEmployees();\r\n  }, []);\r\n\r\n  const onSubmit = (data) => {\r\n    if (isExpenseEditing) {\r\n      updateExpense({ id: editExpenseID, ...data });\r\n    } else {\r\n      addExpense({ ...data });\r\n    }\r\n    loadExpenses();\r\n    history.push(\"/expenses\");\r\n  };\r\n\r\n  if (single_expense_loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div>\r\n      <Paper className={classes.root}>\r\n        <Typography variant=\"h5\" component=\"h3\">\r\n          EXPENSES CLAIM FORM\r\n        </Typography>\r\n        <Typography component=\"p\">Expense Claim Application</Typography>\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div>\r\n            <Controller\r\n              name=\"name\"\r\n              control={control}\r\n              defaultValue={name}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    id=\"margin-normal\"\r\n                    name=\"name\"\r\n                    defaultValue={name}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    select\r\n                  >\r\n                    {employees.map((e) => {\r\n                      return (\r\n                        <MenuItem key={e.name} value={e.name}>\r\n                          {e.name}\r\n                        </MenuItem>\r\n                      );\r\n                    })}\r\n                  </TextField>\r\n                );\r\n              }}\r\n              rules={{ required: \"Name required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"date\"\r\n              control={control}\r\n              defaultValue={date}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Date\"\r\n                    type=\"date\"\r\n                    id=\"margin-normal\"\r\n                    name=\"date\"\r\n                    defaultValue={date}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"From Date is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"purchased_date\"\r\n              control={control}\r\n              defaultValue={purchased_date}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Purchased Date\"\r\n                    id=\"margin-normal\"\r\n                    type=\"date\"\r\n                    name=\"purchased_date\"\r\n                    defaultValue={purchased_date}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"Purchased Date is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"purchased_from\"\r\n              control={control}\r\n              defaultValue={purchased_from}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Purchased From\"\r\n                    id=\"margin-normal\"\r\n                    name=\"purchased_from\"\r\n                    defaultValue={purchased_from}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              // rules={{ required: \"Reason is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"description\"\r\n              control={control}\r\n              defaultValue={description}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Description\"\r\n                    id=\"margin-normal\"\r\n                    name=\"description\"\r\n                    defaultValue={description}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              // rules={{ required: \"Reason is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"amount\"\r\n              control={control}\r\n              defaultValue={amount}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Amount\"\r\n                    type=\"number\"\r\n                    id=\"standard-number\"\r\n                    name=\"amount\"\r\n                    defaultValue={amount}\r\n                    className={classes.textField}\r\n                    //onChange={onChange}\r\n                    onChange={(e) => {\r\n                      onChange(parseInt(e.target.value, 10));\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              //rules={{ required: \"IC No required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"remark\"\r\n              control={control}\r\n              defaultValue={remark}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Remark\"\r\n                    id=\"margin-normal\"\r\n                    name=\"remark\"\r\n                    defaultValue={remark}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              // rules={{ required: \"Reason is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"status\"\r\n              control={control}\r\n              defaultValue=\"Pending\"\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Status\"\r\n                    id=\"margin-normal\"\r\n                    name=\"status\"\r\n                    defaultValue={status}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    select\r\n                  >\r\n                    <MenuItem value=\"Pending\">Pending</MenuItem>\r\n                    <MenuItem value=\"Cancel\">Cancel</MenuItem>\r\n                    <MenuItem value=\"Approved\">Approved</MenuItem>\r\n                    <MenuItem value=\"Rejected\">Rejected</MenuItem>\r\n                  </TextField>\r\n                );\r\n              }}\r\n              //rules={{ required: \"Status is required\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.button}\r\n            >\r\n              Submit <Icon className={classes.rightIcon}>send</Icon>\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  iconSmall: {\r\n    fontSize: 20,\r\n  },\r\n  root: {\r\n    padding: theme.spacing(3, 2),\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 400,\r\n  },\r\n}));\r\n\r\nexport default ExpenseForm;\r\n"]},"metadata":{},"sourceType":"module"}