{"ast":null,"code":"import _toConsumableArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _regeneratorRuntime from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useReducer,useEffect,useRef}from\"react\";import{Button,Icon,TextField,Paper,Typography,Select,Divider,Grid,Toolbar,Box}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import MenuItem from\"@material-ui/core/MenuItem\";import{Controller,useForm}from\"react-hook-form\";import{useHistory}from\"react-router-dom\";import{useEmployeesContext}from\"../context/employees_context\";import{usePayslipsContext}from\"../context/payslips_context\";import{useTablesContext}from\"../context/tables_context\";import Payslip_Earnings from\"./Payslip_Earnings\";import Payslip_Deductions from\"./Payslip_Deductions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initial_values={name:\"\",period:\"\",date:\"\",bank_name:\"\",bank_acno:\"\",status:\"Pending\",total_earnings:0,total_deductions:0,tap_amount:0,scp_amount:0,basic_pay:0,nett_pay:0};var PayslipForm=function PayslipForm(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),calc=_useState2[0],setCalc=_useState2[1];var classes=useStyles();var _usePayslipsContext=usePayslipsContext(),isPayslipEditing=_usePayslipsContext.isPayslipEditing,single_payslip=_usePayslipsContext.single_payslip,updatePayslip=_usePayslipsContext.updatePayslip,addPayslip=_usePayslipsContext.addPayslip,editPayslipID=_usePayslipsContext.editPayslipID,loadPayslips=_usePayslipsContext.loadPayslips,getSinglePayslip=_usePayslipsContext.getSinglePayslip,single_payslip_loading=_usePayslipsContext.single_payslip_loading,single_payslip_error=_usePayslipsContext.single_payslip_error,payslip_period=_usePayslipsContext.payslip_period,payslip_earning_amount=_usePayslipsContext.payslip_earning_amount,payslip_deduction_amount=_usePayslipsContext.payslip_deduction_amount,setPayslipEarningAmount=_usePayslipsContext.setPayslipEarningAmount,setPayslipDeductionAmount=_usePayslipsContext.setPayslipDeductionAmount,payslipearnings=_usePayslipsContext.payslipearnings,payslipdeductions=_usePayslipsContext.payslipdeductions;var _useEmployeesContext=useEmployeesContext(),loadEmployees=_useEmployeesContext.loadEmployees,employees=_useEmployeesContext.employees;var _useTablesContext=useTablesContext(),loadAllowances=_useTablesContext.loadAllowances,loadDeductions=_useTablesContext.loadDeductions,allowances=_useTablesContext.allowances,deductions=_useTablesContext.deductions;//const [state, setState] = useState(single_payslip);\nvar _useForm=useForm(),handleSubmit=_useForm.handleSubmit,control=_useForm.control;var name=single_payslip.name,period=single_payslip.period,date=single_payslip.date,bank_name=single_payslip.bank_name,bank_acno=single_payslip.bank_acno,status=single_payslip.status,total_earnings=single_payslip.total_earnings,total_deductions=single_payslip.total_deductions,tap_amount=single_payslip.tap_amount,scp_amount=single_payslip.scp_amount,basic_pay=single_payslip.basic_pay,nett_pay=single_payslip.nett_pay;useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getSinglePayslip(editPayslipID);case 1:case\"end\":return _context.stop();}}},_callee);})),[]);// useEffect(() => {\n//   if (calc) {\n//     setTimeout(() => {\n//       console.log(\"calc\");\n//       calc_totals();\n//       setCalc(false);\n//     }, 10000);\n//   }\n// }, [calc]);\nvar handleChange=function handleChange(event){//const { rec_id, ...fields } = single_payslip;\n// const value =\n//   event.target.type === \"number\"\n//     ? parseInt(event.target.value, 10)\n//     : event.target.value;\n// setState({ ...state, [event.target.name]: value });\n};var calc_totals=function calc_totals(){var totalTAP=Math.ceil(basic_pay*0.05);var totalSCP=Math.round((basic_pay+Number.EPSILON)*0.035*100)/100;var totalEarnings=payslipearnings.reduce(function(a,v){return a=a+v.amount;},0);var totalDeductions=payslipdeductions.reduce(function(a,v){return a=a+v.amount;},0);var nettPay=basic_pay+totalEarnings-totalDeductions-totalTAP-totalSCP;setPayslipEarningAmount(totalEarnings);setPayslipDeductionAmount(totalDeductions);updatePayslip({id:editPayslipID,total_earnings:totalEarnings,total_deductions:totalDeductions,tap_amount:totalTAP,scp_amount:totalSCP,nett_pay:nettPay});console.log(\"total\",totalEarnings,totalDeductions,totalTAP,totalSCP,nettPay);getSinglePayslip(editPayslipID);};var onSubmit=function onSubmit(data){var rec_id=single_payslip.rec_id,fields=_objectWithoutProperties(single_payslip,[\"rec_id\"]);updatePayslip.apply(void 0,_toConsumableArray(fields));// if (isPayslipEditing) {\n//   updatePayslip({ id: editPayslipID, ...data });\n// } else {\n//   addPayslip({ ...data });\n// }\n// loadPayslips();\n// history.push(\"/batchpayslips\");\n};if(single_payslip_loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(single_payslip_error){history.push(\"/error\");}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(Paper,{className:classes.root,children:[/*#__PURE__*/_jsx(Grid,{container:true,className:classes.root,spacing:15,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h3\",children:\"PAYSLIP FORM\"}),/*#__PURE__*/_jsx(Typography,{component:\"p\",children:\"Payslip Preparation\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,children:[\"Submit \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"name\",control:control,defaultValue:name,render:function render(_ref2){var _ref2$field=_ref2.field,onChange=_ref2$field.onChange,value=_ref2$field.value,error=_ref2.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Name\",id:\"margin-normal\",name:\"name\",defaultValue:name,className:classes.textField,onChange:handleChange// select\n});},rules:{required:\"Name required\"}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Controller,{name:\"period\",control:control,defaultValue:period,render:function render(_ref3){var _ref3$field=_ref3.field,onChange=_ref3$field.onChange,value=_ref3$field.value,error=_ref3.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Period\",id:\"margin-normal\",name:\"period\",defaultValue:period,className:classes.textField,onChange:handleChange,InputProps:{readOnly:true}});}//rules={{ required: \"Name required\" }}\n}),/*#__PURE__*/_jsx(Controller,{name:\"date\",control:control,defaultValue:date,render:function render(_ref4){var _ref4$field=_ref4.field,onChange=_ref4$field.onChange,value=_ref4$field.value,error=_ref4.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Date\",type:\"date\",id:\"margin-normal\",name:\"date\",defaultValue:date,className:classes.textField,onChange:handleChange,InputLabelProps:{shrink:true}});}//rules={{ required: \"Name required\" }}\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Controller,{name:\"bank_name\",control:control,defaultValue:bank_name,render:function render(_ref5){var _ref5$field=_ref5.field,onChange=_ref5$field.onChange,value=_ref5$field.value,error=_ref5.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Bank Name\",id:\"margin-normal\",name:\"bank_name\",defaultValue:bank_name,className:classes.textField,onChange:handleChange});}//rules={{ required: \"Name required\" }}\n}),/*#__PURE__*/_jsx(Controller,{name:\"bank_acno\",control:control,defaultValue:bank_acno,render:function render(_ref6){var _ref6$field=_ref6.field,onChange=_ref6$field.onChange,value=_ref6$field.value,error=_ref6.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Bank AC No\",id:\"margin-normal\",name:\"bank_acno\",value:bank_acno,className:classes.textField,onChange:handleChange});}//rules={{ required: \"Name required\" }}\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Controller,{name:\"tap_amount\",control:control,defaultValue:tap_amount,render:function render(_ref7){var _ref7$field=_ref7.field,onChange=_ref7$field.onChange,value=_ref7$field.value,error=_ref7.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"TAP Contrinution\",type:\"number\",id:\"standard-number\",name:\"tap_amount\",defaultValue:tap_amount,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){handleChange(parseInt(e.target.value,10));}});}//rules={{ required: \"Name required\" }}\n}),/*#__PURE__*/_jsx(Controller,{name:\"scp_amount\",control:control,defaultValue:scp_amount,render:function render(_ref8){var _ref8$field=_ref8.field,onChange=_ref8$field.onChange,value=_ref8$field.value,error=_ref8.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"SCP Contribution\",type:\"number\",id:\"standard-number\",name:\"scp_amount\",defaultValue:scp_amount,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){handleChange(parseInt(e.target.value,10));}});}//rules={{ required: \"Name required\" }}\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Controller,{name:\"total_earnings\",control:control,defaultValue:total_earnings,render:function render(_ref9){var _ref9$field=_ref9.field,onChange=_ref9$field.onChange,value=_ref9$field.value,error=_ref9.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Total Earnings\",type:\"number\",id:\"standard-number\",name:\"total_earnings\",value:total_earnings,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){handleChange(parseInt(e.target.value,10));}});}//rules={{ required: \"Name required\" }}\n}),/*#__PURE__*/_jsx(Controller,{name:\"total_deductions\",control:control,defaultValue:total_deductions,render:function render(_ref10){var _ref10$field=_ref10.field,onChange=_ref10$field.onChange,value=_ref10$field.value,error=_ref10.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Total Deductions\",type:\"number\",id:\"standard-number\",name:\"total_deductions\",value:total_deductions,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){handleChange(parseInt(e.target.value,10));}});}//rules={{ required: \"Name required\" }}\n})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Controller,{name:\"basic_pay\",control:control,defaultValue:basic_pay,render:function render(_ref11){var _ref11$field=_ref11.field,onChange=_ref11$field.onChange,value=_ref11$field.value,error=_ref11.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Basic Pay\",type:\"number\",id:\"standard-number\",name:\"basic_pay\",value:basic_pay,className:classes.textField,onChange:handleChange// onChange={(e) => {\n//   handleChange(parseInt(e.target.value, 10));\n// }}\n});}//rules={{ required: \"Name required\" }}\n}),/*#__PURE__*/_jsx(Controller,{name:\"nett_pay\",control:control,defaultValue:nett_pay,render:function render(_ref12){var _ref12$field=_ref12.field,onChange=_ref12$field.onChange,value=_ref12$field.value,error=_ref12.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Nett Pay\",type:\"number\",id:\"standard-number\",name:\"nett_pay\",value:nett_pay,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){handleChange(parseInt(e.target.value,10));}});}//rules={{ required: \"Name required\" }}\n})]}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:calc_totals,children:[\"Calc \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",className:classes.grid,children:[/*#__PURE__*/_jsx(Grid,{xs:12,children:/*#__PURE__*/_jsx(Payslip_Earnings,{setCalc:setCalc})}),/*#__PURE__*/_jsx(Divider,{orientation:\"vertical\",flexItem:true}),/*#__PURE__*/_jsx(Grid,{xs:12,children:/*#__PURE__*/_jsx(Payslip_Deductions,{})})]})}),/*#__PURE__*/_jsx(Divider,{})]})})});};var useStyles=makeStyles(function(theme){return{button:{margin:theme.spacing(1)},leftIcon:{marginRight:theme.spacing(1)},rightIcon:{marginLeft:theme.spacing(1)},iconSmall:{fontSize:20},root:{padding:theme.spacing(3,2)},container:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:400},grid:{padding:theme.spacing(3,2)// justifyContent: \"center\",\n},box:{height:100,display:\"flex\",border:\"1px solid black\",padding:8}};});export default PayslipForm;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/PayslipForm.js"],"names":["React","useState","useReducer","useEffect","useRef","Button","Icon","TextField","Paper","Typography","Select","Divider","Grid","Toolbar","Box","makeStyles","MenuItem","Controller","useForm","useHistory","useEmployeesContext","usePayslipsContext","useTablesContext","Payslip_Earnings","Payslip_Deductions","initial_values","name","period","date","bank_name","bank_acno","status","total_earnings","total_deductions","tap_amount","scp_amount","basic_pay","nett_pay","PayslipForm","history","calc","setCalc","classes","useStyles","isPayslipEditing","single_payslip","updatePayslip","addPayslip","editPayslipID","loadPayslips","getSinglePayslip","single_payslip_loading","single_payslip_error","payslip_period","payslip_earning_amount","payslip_deduction_amount","setPayslipEarningAmount","setPayslipDeductionAmount","payslipearnings","payslipdeductions","loadEmployees","employees","loadAllowances","loadDeductions","allowances","deductions","handleSubmit","control","handleChange","event","calc_totals","totalTAP","Math","ceil","totalSCP","round","Number","EPSILON","totalEarnings","reduce","a","v","amount","totalDeductions","nettPay","id","console","log","onSubmit","data","rec_id","fields","push","root","button","rightIcon","field","onChange","value","error","fieldState","textField","required","readOnly","shrink","e","parseInt","target","grid","theme","margin","spacing","leftIcon","marginRight","marginLeft","iconSmall","fontSize","padding","container","display","flexWrap","width","box","height","border"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect, useRef } from \"react\";\r\nimport {\r\n  Button,\r\n  Icon,\r\n  TextField,\r\n  Paper,\r\n  Typography,\r\n  Select,\r\n  Divider,\r\n  Grid,\r\n  Toolbar,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { usePayslipsContext } from \"../context/payslips_context\";\r\nimport { useTablesContext } from \"../context/tables_context\";\r\nimport Payslip_Earnings from \"./Payslip_Earnings\";\r\nimport Payslip_Deductions from \"./Payslip_Deductions\";\r\n\r\nconst initial_values = {\r\n  name: \"\",\r\n  period: \"\",\r\n  date: \"\",\r\n  bank_name: \"\",\r\n  bank_acno: \"\",\r\n  status: \"Pending\",\r\n  total_earnings: 0,\r\n  total_deductions: 0,\r\n  tap_amount: 0,\r\n  scp_amount: 0,\r\n  basic_pay: 0,\r\n  nett_pay: 0,\r\n};\r\n\r\nconst PayslipForm = () => {\r\n  let history = useHistory();\r\n  const [calc, setCalc] = useState(false);\r\n  const classes = useStyles();\r\n  const {\r\n    isPayslipEditing,\r\n    single_payslip,\r\n    updatePayslip,\r\n    addPayslip,\r\n    editPayslipID,\r\n    loadPayslips,\r\n    getSinglePayslip,\r\n    single_payslip_loading,\r\n    single_payslip_error,\r\n    payslip_period,\r\n    payslip_earning_amount,\r\n    payslip_deduction_amount,\r\n    setPayslipEarningAmount,\r\n    setPayslipDeductionAmount,\r\n    payslipearnings,\r\n    payslipdeductions,\r\n  } = usePayslipsContext();\r\n  const { loadEmployees, employees } = useEmployeesContext();\r\n  const { loadAllowances, loadDeductions, allowances, deductions } =\r\n    useTablesContext();\r\n  //const [state, setState] = useState(single_payslip);\r\n  const { handleSubmit, control } = useForm();\r\n\r\n  const {\r\n    name,\r\n    period,\r\n    date,\r\n    bank_name,\r\n    bank_acno,\r\n    status,\r\n    total_earnings,\r\n    total_deductions,\r\n    tap_amount,\r\n    scp_amount,\r\n    basic_pay,\r\n    nett_pay,\r\n  } = single_payslip;\r\n\r\n  useEffect(async () => {\r\n    getSinglePayslip(editPayslipID);\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if (calc) {\r\n  //     setTimeout(() => {\r\n  //       console.log(\"calc\");\r\n  //       calc_totals();\r\n  //       setCalc(false);\r\n  //     }, 10000);\r\n  //   }\r\n  // }, [calc]);\r\n\r\n  const handleChange = (event) => {\r\n    //const { rec_id, ...fields } = single_payslip;\r\n    // const value =\r\n    //   event.target.type === \"number\"\r\n    //     ? parseInt(event.target.value, 10)\r\n    //     : event.target.value;\r\n    // setState({ ...state, [event.target.name]: value });\r\n  };\r\n\r\n  const calc_totals = () => {\r\n    const totalTAP = Math.ceil(basic_pay * 0.05);\r\n    const totalSCP =\r\n      Math.round((basic_pay + Number.EPSILON) * 0.035 * 100) / 100;\r\n    const totalEarnings = payslipearnings.reduce(\r\n      (a, v) => (a = a + v.amount),\r\n      0\r\n    );\r\n    const totalDeductions = payslipdeductions.reduce(\r\n      (a, v) => (a = a + v.amount),\r\n      0\r\n    );\r\n    const nettPay =\r\n      basic_pay + totalEarnings - totalDeductions - totalTAP - totalSCP;\r\n    setPayslipEarningAmount(totalEarnings);\r\n    setPayslipDeductionAmount(totalDeductions);\r\n    updatePayslip({\r\n      id: editPayslipID,\r\n      total_earnings: totalEarnings,\r\n      total_deductions: totalDeductions,\r\n      tap_amount: totalTAP,\r\n      scp_amount: totalSCP,\r\n      nett_pay: nettPay,\r\n    });\r\n    console.log(\r\n      \"total\",\r\n      totalEarnings,\r\n      totalDeductions,\r\n      totalTAP,\r\n      totalSCP,\r\n      nettPay\r\n    );\r\n    getSinglePayslip(editPayslipID);\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    const { rec_id, ...fields } = single_payslip;\r\n    updatePayslip(...fields);\r\n\r\n    // if (isPayslipEditing) {\r\n    //   updatePayslip({ id: editPayslipID, ...data });\r\n    // } else {\r\n    //   addPayslip({ ...data });\r\n    // }\r\n    // loadPayslips();\r\n    // history.push(\"/batchpayslips\");\r\n  };\r\n\r\n  if (single_payslip_loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (single_payslip_error) {\r\n    history.push(\"/error\");\r\n  }\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <Paper className={classes.root}>\r\n          <Grid container className={classes.root} spacing={15}>\r\n            <div>\r\n              <Typography variant=\"h5\" component=\"h3\">\r\n                PAYSLIP FORM\r\n              </Typography>\r\n              <Typography component=\"p\">Payslip Preparation</Typography>\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.button}\r\n              >\r\n                Submit <Icon className={classes.rightIcon}>send</Icon>\r\n              </Button>\r\n            </div>\r\n          </Grid>\r\n\r\n          <Grid item xs={12}>\r\n            <div>\r\n              <Controller\r\n                name=\"name\"\r\n                control={control}\r\n                defaultValue={name}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Name\"\r\n                      id=\"margin-normal\"\r\n                      name=\"name\"\r\n                      defaultValue={name}\r\n                      className={classes.textField}\r\n                      onChange={handleChange}\r\n                      // select\r\n                    >\r\n                      {/* {employees.map((e) => {\r\n                  return (\r\n                    <MenuItem key={e.name} value={e.name}>\r\n                      {e.name}\r\n                    </MenuItem>\r\n                  );\r\n                })} */}\r\n                    </TextField>\r\n                  );\r\n                }}\r\n                rules={{ required: \"Name required\" }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Controller\r\n                name=\"period\"\r\n                control={control}\r\n                defaultValue={period}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Period\"\r\n                      id=\"margin-normal\"\r\n                      name=\"period\"\r\n                      defaultValue={period}\r\n                      className={classes.textField}\r\n                      onChange={handleChange}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n              <Controller\r\n                name=\"date\"\r\n                control={control}\r\n                defaultValue={date}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Date\"\r\n                      type=\"date\"\r\n                      id=\"margin-normal\"\r\n                      name=\"date\"\r\n                      defaultValue={date}\r\n                      className={classes.textField}\r\n                      onChange={handleChange}\r\n                      InputLabelProps={{\r\n                        shrink: true,\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Controller\r\n                name=\"bank_name\"\r\n                control={control}\r\n                defaultValue={bank_name}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Bank Name\"\r\n                      id=\"margin-normal\"\r\n                      name=\"bank_name\"\r\n                      defaultValue={bank_name}\r\n                      className={classes.textField}\r\n                      onChange={handleChange}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n              <Controller\r\n                name=\"bank_acno\"\r\n                control={control}\r\n                defaultValue={bank_acno}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Bank AC No\"\r\n                      id=\"margin-normal\"\r\n                      name=\"bank_acno\"\r\n                      value={bank_acno}\r\n                      className={classes.textField}\r\n                      onChange={handleChange}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Controller\r\n                name=\"tap_amount\"\r\n                control={control}\r\n                defaultValue={tap_amount}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"TAP Contrinution\"\r\n                      type=\"number\"\r\n                      id=\"standard-number\"\r\n                      name=\"tap_amount\"\r\n                      defaultValue={tap_amount}\r\n                      className={classes.textField}\r\n                      //onChange={onChange}\r\n                      onChange={(e) => {\r\n                        handleChange(parseInt(e.target.value, 10));\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n              <Controller\r\n                name=\"scp_amount\"\r\n                control={control}\r\n                defaultValue={scp_amount}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"SCP Contribution\"\r\n                      type=\"number\"\r\n                      id=\"standard-number\"\r\n                      name=\"scp_amount\"\r\n                      defaultValue={scp_amount}\r\n                      className={classes.textField}\r\n                      //onChange={onChange}\r\n                      onChange={(e) => {\r\n                        handleChange(parseInt(e.target.value, 10));\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Controller\r\n                name=\"total_earnings\"\r\n                control={control}\r\n                defaultValue={total_earnings}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Total Earnings\"\r\n                      type=\"number\"\r\n                      id=\"standard-number\"\r\n                      name=\"total_earnings\"\r\n                      value={total_earnings}\r\n                      className={classes.textField}\r\n                      //onChange={onChange}\r\n                      onChange={(e) => {\r\n                        handleChange(parseInt(e.target.value, 10));\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n              <Controller\r\n                name=\"total_deductions\"\r\n                control={control}\r\n                defaultValue={total_deductions}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Total Deductions\"\r\n                      type=\"number\"\r\n                      id=\"standard-number\"\r\n                      name=\"total_deductions\"\r\n                      value={total_deductions}\r\n                      className={classes.textField}\r\n                      //onChange={onChange}\r\n                      onChange={(e) => {\r\n                        handleChange(parseInt(e.target.value, 10));\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Controller\r\n                name=\"basic_pay\"\r\n                control={control}\r\n                defaultValue={basic_pay}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Basic Pay\"\r\n                      type=\"number\"\r\n                      id=\"standard-number\"\r\n                      name=\"basic_pay\"\r\n                      value={basic_pay}\r\n                      className={classes.textField}\r\n                      onChange={handleChange}\r\n                      // onChange={(e) => {\r\n                      //   handleChange(parseInt(e.target.value, 10));\r\n                      // }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n              <Controller\r\n                name=\"nett_pay\"\r\n                control={control}\r\n                defaultValue={nett_pay}\r\n                render={({\r\n                  field: { onChange, value },\r\n                  fieldState: { error },\r\n                }) => {\r\n                  return (\r\n                    <TextField\r\n                      label=\"Nett Pay\"\r\n                      type=\"number\"\r\n                      id=\"standard-number\"\r\n                      name=\"nett_pay\"\r\n                      value={nett_pay}\r\n                      className={classes.textField}\r\n                      //onChange={onChange}\r\n                      onChange={(e) => {\r\n                        handleChange(parseInt(e.target.value, 10));\r\n                      }}\r\n                    ></TextField>\r\n                  );\r\n                }}\r\n                //rules={{ required: \"Name required\" }}\r\n              />\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.button}\r\n              onClick={calc_totals}\r\n            >\r\n              Calc <Icon className={classes.rightIcon}>send</Icon>\r\n            </Button>\r\n          </Grid>\r\n          <Divider />\r\n          <div>\r\n            <Grid container alignItems=\"center\" className={classes.grid}>\r\n              {/* <Grid item xs={4} style={{ textAlign: \"center\" }}> */}\r\n              <Grid xs={12}>\r\n                <Payslip_Earnings setCalc={setCalc} />\r\n              </Grid>\r\n              <Divider orientation=\"vertical\" flexItem />\r\n              {/* <Grid item xs={4} style={{ textAlign: \"center\" }}> */}\r\n              <Grid xs={12}>\r\n                <Payslip_Deductions />\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n          <Divider />\r\n        </Paper>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  iconSmall: {\r\n    fontSize: 20,\r\n  },\r\n  root: {\r\n    padding: theme.spacing(3, 2),\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 400,\r\n  },\r\n  grid: {\r\n    padding: theme.spacing(3, 2),\r\n    // justifyContent: \"center\",\r\n  },\r\n  box: {\r\n    height: 100,\r\n    display: \"flex\",\r\n    border: \"1px solid black\",\r\n    padding: 8,\r\n  },\r\n}));\r\n\r\nexport default PayslipForm;\r\n"]},"metadata":{},"sourceType":"module"}